<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Eco-Ideias</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-50">
<header class="bg-white border-b border-gray-200 px-6 py-4">
    <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-green-600"><path d="M11 20A7 7 0 0 1 4 13H2a9 9 0 0 0 18 0h-2a7 7 0 0 1-7 7Z"></path><path d="M12 12A4.95 4.95 0 0 1 17 7h2a7 7 0 0 0-14 0h2a4.95 4.95 0 0 1 5 5Z"></path></svg>
            </div>
            <h1 class="text-xl font-bold text-gray-800">Eco-Ideias</h1>
        </div>
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="text-sm text-gray-600 hover:text-red-500 font-semibold">Sair</button>
        </form>
    </div>
</header>

<main class="px-6 py-8 max-w-7xl mx-auto">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8">
        <h2 class="text-3xl font-bold text-gray-800 mb-4 sm:mb-0">
            Bem-vindo(a), <span th:text="${nomeUsuario}">Nome do Usuário</span>!
        </h2>
        <a th:href="@{/ideias/novo}" class="w-full sm:w-auto bg-green-700 hover:bg-green-800 text-white font-bold py-3 px-6 text-base rounded-lg transition-colors duration-200 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="mr-2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            Submeter Nova Ideia
        </a>
    </div>

    <section class="mb-10">
        <h3 class="text-2xl font-bold text-gray-800 mb-6">Minhas Ideias</h3>
        <div th:if="${ideiasDoUsuario.isEmpty()}" class="text-center bg-white p-8 rounded-lg shadow-sm">
            <p class="text-gray-500">Você ainda não submeteu nenhuma ideia. Que tal começar agora?</p>
        </div>

        <div th:if="${!ideiasDoUsuario.isEmpty()}" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div th:each="idea : ${ideiasDoUsuario}" class="bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 flex flex-col">
                <div class="p-5 flex-grow">
                    <div class="flex items-start justify-between mb-3">
                        <h4 class="text-lg font-semibold text-gray-800 leading-tight" th:text="${idea.titulo}">Título da Ideia</h4>
                        <span class="text-xs font-medium px-2 py-1 rounded-full border-0 whitespace-nowrap"
                              th:text="${idea.status.toString().replace('_', ' ')}"
                              th:classappend="${idea.status.name() == 'APROVADA' ? 'bg-green-100 text-green-800' :
                                                   (idea.status.name() == 'EM_ANALISE' ? 'bg-yellow-100 text-yellow-800' :
                                                   (idea.status.name() == 'REPROVADA' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800'))}">
                                Status
                            </span>
                    </div>
                    <p class="text-gray-600 text-sm leading-relaxed" th:text="${idea.descricao}">Descrição da ideia...</p>
                </div>
                <div class="p-4 bg-gray-50 border-t text-xs text-gray-500">
                    Criado em: <span th:text="${#temporals.format(idea.dataDeCriacao, 'dd/MM/yyyy HH:mm')}">Data</span>
                </div>
            </div>
        </div>
    </section>

    <section>
        <h3 class="text-2xl font-bold text-gray-800 mb-6">Impacto das Suas Ideias Aprovadas</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
                    <svg class="w-6 h-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 0V4m0 16v-4m8-8h-4m-8 0H4m16 8v4m-16 0v-4" /></svg>
                </div>
                <div>
                    <p class="text-sm font-medium text-gray-600">Água Economizada</p>
                    <p class="text-2xl font-bold text-gray-800" th:text="${#numbers.formatDecimal(impactoAgua, 1, 'POINT', 0, 'COMMA')} + ' L'"></p>
                </div>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center">
                    <svg class="w-6 h-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                </div>
                <div>
                    <p class="text-sm font-medium text-gray-600">Energia Poupada</p>
                    <p class="text-2xl font-bold text-gray-800" th:text="${#numbers.formatDecimal(impactoEnergia, 1, 'POINT', 0, 'COMMA')} + ' kWh'"></p>
                </div>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                <div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center">
                    <svg class="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                </div>
                <div>
                    <p class="text-sm font-medium text-gray-600">Resíduos Reduzidos</p>
                    <p class="text-2xl font-bold text-gray-800" th:text="${#numbers.formatDecimal(impactoResiduos, 1, 'POINT', 1, 'COMMA')} + ' Kg'"></p>
                </div>
            </div>
        </div>
    </section>
</main>
</body>
</html>